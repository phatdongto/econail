{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.reset = exports.auth = exports.ui = exports.validPublicHooks = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nexports.setup = setup;\nexports.id = id;\nexports.clientID = clientID;\nexports.domain = domain;\nexports.clientBaseUrl = clientBaseUrl;\nexports.tenantBaseUrl = tenantBaseUrl;\nexports.useTenantInfo = useTenantInfo;\nexports.connectionResolver = connectionResolver;\nexports.setResolvedConnection = setResolvedConnection;\nexports.resolvedConnection = resolvedConnection;\nexports.languageBaseUrl = languageBaseUrl;\nexports.setSubmitting = setSubmitting;\nexports.submitting = submitting;\nexports.setGlobalError = setGlobalError;\nexports.globalError = globalError;\nexports.clearGlobalError = clearGlobalError;\nexports.setGlobalSuccess = setGlobalSuccess;\nexports.globalSuccess = globalSuccess;\nexports.clearGlobalSuccess = clearGlobalSuccess;\nexports.setGlobalInfo = setGlobalInfo;\nexports.globalInfo = globalInfo;\nexports.clearGlobalInfo = clearGlobalInfo;\nexports.rendering = rendering;\nexports.stopRendering = stopRendering;\nexports.setSupressSubmitOverlay = setSupressSubmitOverlay;\nexports.suppressSubmitOverlay = suppressSubmitOverlay;\nexports.hooks = hooks;\nexports.withAuthOptions = withAuthOptions;\nexports.extractTenantBaseUrlOption = extractTenantBaseUrlOption;\nexports.render = render;\nexports.setLoggedIn = setLoggedIn;\nexports.loggedIn = loggedIn;\nexports.defaultADUsernameFromEmailPrefix = defaultADUsernameFromEmailPrefix;\nexports.setCaptcha = setCaptcha;\nexports.captcha = captcha;\nexports.prefill = prefill;\nexports.warn = warn;\nexports.error = error;\nexports.allowedConnections = allowedConnections;\nexports.connections = connections;\nexports.connection = connection;\nexports.hasOneConnection = hasOneConnection;\nexports.hasOnlyConnections = hasOnlyConnections;\nexports.hasSomeConnections = hasSomeConnections;\nexports.countConnections = countConnections;\nexports.findConnection = findConnection;\nexports.hasConnection = hasConnection;\nexports.filterConnections = filterConnections;\nexports.useCustomPasswordlessConnection = useCustomPasswordlessConnection;\nexports.runHook = runHook;\nexports.emitEvent = emitEvent;\nexports.handleEvent = handleEvent;\nexports.loginErrorMessage = loginErrorMessage;\nexports.stop = stop;\nexports.hasStopped = hasStopped;\nexports.hashCleanup = hashCleanup;\nexports.emitHashParsedEvent = emitHashParsedEvent;\nexports.emitAuthenticatedEvent = emitAuthenticatedEvent;\nexports.emitAuthorizationErrorEvent = emitAuthorizationErrorEvent;\nexports.emitUnrecoverableErrorEvent = emitUnrecoverableErrorEvent;\nexports.showBadge = showBadge;\nexports.overrideOptions = overrideOptions;\n\nvar _urlJoin = require('url-join');\n\nvar _urlJoin2 = _interopRequireDefault(_urlJoin);\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _media_utils = require('../utils/media_utils');\n\nvar _string_utils = require('../utils/string_utils');\n\nvar _url_utils = require('../utils/url_utils');\n\nvar _i18n = require('../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _gravatar_provider = require('../avatar/gravatar_provider');\n\nvar gp = _interopRequireWildcard(_gravatar_provider);\n\nvar _data_utils = require('../utils/data_utils');\n\nvar _index = require('./client/index');\n\nvar _captcha = require('../field/captcha');\n\nvar captchaField = _interopRequireWildcard(_captcha);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar _dataFns = (0, _data_utils.dataFns)(['core']),\n    get = _dataFns.get,\n    init = _dataFns.init,\n    remove = _dataFns.remove,\n    reset = _dataFns.reset,\n    set = _dataFns.set,\n    tget = _dataFns.tget,\n    tset = _dataFns.tset,\n    tremove = _dataFns.tremove;\n\nvar validPublicHooks = exports.validPublicHooks = ['loggingIn', 'signingUp'];\n\nfunction setup(id, clientID, domain, options, hookRunner, emitEventFn, handleEventFn) {\n  var m = init(id, _immutable2.default.fromJS({\n    clientBaseUrl: extractClientBaseUrlOption(options, domain),\n    tenantBaseUrl: extractTenantBaseUrlOption(options, domain),\n    languageBaseUrl: extractLanguageBaseUrlOption(options, domain),\n    auth: extractAuthOptions(options),\n    clientID: clientID,\n    domain: domain,\n    emitEventFn: emitEventFn,\n    hookRunner: hookRunner,\n    useTenantInfo: options.__useTenantInfo || false,\n    hashCleanup: options.hashCleanup === false ? false : true,\n    allowedConnections: _immutable2.default.fromJS(options.allowedConnections || []),\n    useCustomPasswordlessConnection: options.useCustomPasswordlessConnection === true ? true : false,\n    ui: extractUIOptions(id, options),\n    defaultADUsernameFromEmailPrefix: options.defaultADUsernameFromEmailPrefix === false ? false : true,\n    prefill: options.prefill || {},\n    connectionResolver: options.connectionResolver,\n    handleEventFn: handleEventFn,\n    hooks: extractHookOptions(options)\n  }));\n  m = i18n.initI18n(m);\n  return m;\n}\n\nfunction id(m) {\n  return m.get('id');\n}\n\nfunction clientID(m) {\n  return get(m, 'clientID');\n}\n\nfunction domain(m) {\n  return get(m, 'domain');\n}\n\nfunction clientBaseUrl(m) {\n  return get(m, 'clientBaseUrl');\n}\n\nfunction tenantBaseUrl(m) {\n  return get(m, 'tenantBaseUrl');\n}\n\nfunction useTenantInfo(m) {\n  return get(m, 'useTenantInfo');\n}\n\nfunction connectionResolver(m) {\n  return get(m, 'connectionResolver');\n}\n\nfunction setResolvedConnection(m, resolvedConnection) {\n  if (!resolvedConnection) {\n    return set(m, 'resolvedConnection', undefined);\n  }\n\n  if (!resolvedConnection.type || !resolvedConnection.name) {\n    throw new Error('Invalid connection object. The resolved connection must look like: `{ type: \"database\", name: \"connection name\" }`.');\n  }\n\n  if (resolvedConnection.type !== 'database') {\n    throw new Error('Invalid connection type. Only database connections can be resolved with a custom resolver.');\n  }\n\n  return set(m, 'resolvedConnection', _immutable2.default.fromJS(resolvedConnection));\n}\n\nfunction resolvedConnection(m) {\n  var resolvedConnection = get(m, 'resolvedConnection');\n\n  if (!resolvedConnection) {\n    return undefined;\n  }\n\n  return findConnection(m, resolvedConnection.get('name'));\n}\n\nfunction languageBaseUrl(m) {\n  return get(m, 'languageBaseUrl');\n}\n\nfunction setSubmitting(m, value) {\n  var error = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  m = tset(m, 'submitting', value);\n  m = clearGlobalSuccess(m);\n  m = error && !value ? setGlobalError(m, error) : clearGlobalError(m);\n  return m;\n}\n\nfunction submitting(m) {\n  return tget(m, 'submitting', false);\n}\n\nfunction setGlobalError(m, str) {\n  return tset(m, 'globalError', str);\n}\n\nfunction globalError(m) {\n  return tget(m, 'globalError', '');\n}\n\nfunction clearGlobalError(m) {\n  return tremove(m, 'globalError');\n}\n\nfunction setGlobalSuccess(m, str) {\n  return tset(m, 'globalSuccess', str);\n}\n\nfunction globalSuccess(m) {\n  return tget(m, 'globalSuccess', '');\n}\n\nfunction clearGlobalSuccess(m) {\n  return tremove(m, 'globalSuccess');\n}\n\nfunction setGlobalInfo(m, str) {\n  return tset(m, 'globalInfo', str);\n}\n\nfunction globalInfo(m) {\n  return tget(m, 'globalInfo', '');\n}\n\nfunction clearGlobalInfo(m) {\n  return tremove(m, 'globalInfo');\n}\n\nfunction rendering(m) {\n  return tget(m, 'render', false);\n}\n\nfunction stopRendering(m) {\n  return tremove(m, 'render');\n}\n\nfunction setSupressSubmitOverlay(m, b) {\n  return set(m, 'suppressSubmitOverlay', b);\n}\n\nfunction suppressSubmitOverlay(m) {\n  return get(m, 'suppressSubmitOverlay');\n}\n\nfunction hooks(m) {\n  return get(m, 'hooks');\n}\n\nfunction extractUIOptions(id, options) {\n  var closable = options.container ? false : undefined === options.closable ? true : !!options.closable;\n  var theme = options.theme || {};\n  var labeledSubmitButton = theme.labeledSubmitButton,\n      hideMainScreenTitle = theme.hideMainScreenTitle,\n      logo = theme.logo,\n      primaryColor = theme.primaryColor,\n      authButtons = theme.authButtons;\n  var avatar = options.avatar !== null;\n  var customAvatarProvider = options.avatar && typeof options.avatar.url === 'function' && typeof options.avatar.displayName === 'function' && options.avatar;\n  var avatarProvider = customAvatarProvider || gp;\n  return new _immutable2.default.fromJS({\n    containerID: options.container || 'auth0-lock-container-' + id,\n    appendContainer: !options.container,\n    autoclose: undefined === options.autoclose ? false : closable && options.autoclose,\n    autofocus: undefined === options.autofocus ? !(options.container || (0, _media_utils.isSmallScreen)()) : !!options.autofocus,\n    avatar: avatar,\n    avatarProvider: avatarProvider,\n    logo: typeof logo === 'string' ? logo : undefined,\n    closable: closable,\n    hideMainScreenTitle: !!hideMainScreenTitle,\n    labeledSubmitButton: undefined === labeledSubmitButton ? true : !!labeledSubmitButton,\n    language: undefined === options.language ? 'en' : (0, _trim2.default)(options.language || '').toLowerCase(),\n    dict: _typeof(options.languageDictionary) === 'object' ? options.languageDictionary : {},\n    disableWarnings: options.disableWarnings === undefined ? false : !!options.disableWarnings,\n    mobile: undefined === options.mobile ? false : !!options.mobile,\n    popupOptions: undefined === options.popupOptions ? {} : options.popupOptions,\n    primaryColor: typeof primaryColor === 'string' ? primaryColor : undefined,\n    rememberLastLogin: undefined === options.rememberLastLogin ? true : !!options.rememberLastLogin,\n    allowAutocomplete: !!options.allowAutocomplete,\n    preferConnectionDisplayName: !!options.preferConnectionDisplayName,\n    authButtonsTheme: (typeof authButtons === 'undefined' ? 'undefined' : _typeof(authButtons)) === 'object' ? authButtons : {},\n    allowShowPassword: !!options.allowShowPassword,\n    allowPasswordAutocomplete: !!options.allowPasswordAutocomplete,\n    scrollGlobalMessagesIntoView: undefined === options.scrollGlobalMessagesIntoView ? true : !!options.scrollGlobalMessagesIntoView\n  });\n}\n\nfunction extractHookOptions(options) {\n  var hooks = {};\n  validPublicHooks.forEach(function (hookName) {\n    if (options.hooks && typeof options.hooks[hookName] === 'function') {\n      hooks[hookName] = options.hooks[hookName];\n    }\n  });\n  return new _immutable2.default.fromJS(hooks);\n}\n\nvar _dataFns2 = (0, _data_utils.dataFns)(['core', 'ui']),\n    getUI = _dataFns2.get,\n    setUI = _dataFns2.set;\n\nvar _dataFns3 = (0, _data_utils.dataFns)(['core', 'transient', 'ui']),\n    tgetUI = _dataFns3.get,\n    tsetUI = _dataFns3.set;\n\nvar getUIAttribute = function getUIAttribute(m, attribute) {\n  return tgetUI(m, attribute) || getUI(m, attribute);\n};\n\nvar ui = exports.ui = {\n  containerID: function containerID(lock) {\n    return getUIAttribute(lock, 'containerID');\n  },\n  appendContainer: function appendContainer(lock) {\n    return getUIAttribute(lock, 'appendContainer');\n  },\n  autoclose: function autoclose(lock) {\n    return getUIAttribute(lock, 'autoclose');\n  },\n  autofocus: function autofocus(lock) {\n    return getUIAttribute(lock, 'autofocus');\n  },\n  avatar: function avatar(lock) {\n    return getUIAttribute(lock, 'avatar');\n  },\n  avatarProvider: function avatarProvider(lock) {\n    return getUIAttribute(lock, 'avatarProvider');\n  },\n  closable: function closable(lock) {\n    return getUIAttribute(lock, 'closable');\n  },\n  dict: function dict(lock) {\n    return getUIAttribute(lock, 'dict');\n  },\n  disableWarnings: function disableWarnings(lock) {\n    return getUIAttribute(lock, 'disableWarnings');\n  },\n  labeledSubmitButton: function labeledSubmitButton(lock) {\n    return getUIAttribute(lock, 'labeledSubmitButton');\n  },\n  hideMainScreenTitle: function hideMainScreenTitle(lock) {\n    return getUIAttribute(lock, 'hideMainScreenTitle');\n  },\n  language: function language(lock) {\n    return getUIAttribute(lock, 'language');\n  },\n  logo: function logo(lock) {\n    return getUIAttribute(lock, 'logo');\n  },\n  mobile: function mobile(lock) {\n    return getUIAttribute(lock, 'mobile');\n  },\n  popupOptions: function popupOptions(lock) {\n    return getUIAttribute(lock, 'popupOptions');\n  },\n  primaryColor: function primaryColor(lock) {\n    return getUIAttribute(lock, 'primaryColor');\n  },\n  authButtonsTheme: function authButtonsTheme(lock) {\n    return getUIAttribute(lock, 'authButtonsTheme');\n  },\n  preferConnectionDisplayName: function preferConnectionDisplayName(lock) {\n    return getUIAttribute(lock, 'preferConnectionDisplayName');\n  },\n  rememberLastLogin: function rememberLastLogin(m) {\n    return tget(m, 'rememberLastLogin', getUIAttribute(m, 'rememberLastLogin'));\n  },\n  allowAutocomplete: function allowAutocomplete(m) {\n    return tget(m, 'allowAutocomplete', getUIAttribute(m, 'allowAutocomplete'));\n  },\n  scrollGlobalMessagesIntoView: function scrollGlobalMessagesIntoView(lock) {\n    return getUIAttribute(lock, 'scrollGlobalMessagesIntoView');\n  },\n  allowShowPassword: function allowShowPassword(m) {\n    return tget(m, 'allowShowPassword', getUIAttribute(m, 'allowShowPassword'));\n  },\n  allowPasswordAutocomplete: function allowPasswordAutocomplete(m) {\n    return tget(m, 'allowPasswordAutocomplete', getUIAttribute(m, 'allowPasswordAutocomplete'));\n  }\n};\n\nvar _dataFns4 = (0, _data_utils.dataFns)(['core', 'auth']),\n    getAuthAttribute = _dataFns4.get;\n\nvar auth = exports.auth = {\n  connectionScopes: function connectionScopes(m) {\n    return getAuthAttribute(m, 'connectionScopes');\n  },\n  params: function params(m) {\n    return tget(m, 'authParams') || getAuthAttribute(m, 'params');\n  },\n  autoParseHash: function autoParseHash(lock) {\n    return getAuthAttribute(lock, 'autoParseHash');\n  },\n  redirect: function redirect(lock) {\n    return getAuthAttribute(lock, 'redirect');\n  },\n  redirectUrl: function redirectUrl(lock) {\n    return getAuthAttribute(lock, 'redirectUrl');\n  },\n  responseType: function responseType(lock) {\n    return getAuthAttribute(lock, 'responseType');\n  },\n  sso: function sso(lock) {\n    return getAuthAttribute(lock, 'sso');\n  }\n};\n\nfunction extractAuthOptions(options) {\n  var _ref = options.auth || {},\n      audience = _ref.audience,\n      connectionScopes = _ref.connectionScopes,\n      params = _ref.params,\n      autoParseHash = _ref.autoParseHash,\n      redirect = _ref.redirect,\n      redirectUrl = _ref.redirectUrl,\n      responseMode = _ref.responseMode,\n      responseType = _ref.responseType,\n      sso = _ref.sso,\n      state = _ref.state,\n      nonce = _ref.nonce;\n\n  if (options.auth && options.auth.redirectUri) {\n    console.warn(\"You're sending an `auth` option named `redirectUri`. This option will be ignored. Use `redirectUrl` instead.\");\n  }\n\n  audience = typeof audience === 'string' ? audience : undefined;\n  connectionScopes = (typeof connectionScopes === 'undefined' ? 'undefined' : _typeof(connectionScopes)) === 'object' ? connectionScopes : {};\n  params = (typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object' ? params : {}; // by default is null because we need to know if it was set when we curate the responseType\n\n  redirectUrl = typeof redirectUrl === 'string' && redirectUrl ? redirectUrl : null;\n  autoParseHash = typeof autoParseHash === 'boolean' ? autoParseHash : true;\n  redirect = typeof redirect === 'boolean' ? redirect : true;\n  responseMode = typeof responseMode === 'string' ? responseMode : undefined;\n  state = typeof state === 'string' ? state : undefined;\n  nonce = typeof nonce === 'string' ? nonce : undefined; // if responseType was not set and there is a redirectUrl, it defaults to code. Otherwise token.\n\n  responseType = typeof responseType === 'string' ? responseType : redirectUrl ? 'code' : 'token'; // now we set the default because we already did the validation\n\n  redirectUrl = redirectUrl || '' + (0, _url_utils.getOriginFromUrl)(window.location.href) + window.location.pathname;\n  sso = typeof sso === 'boolean' ? sso : true;\n\n  if (!params.scope) {\n    params.scope = 'openid profile email';\n  }\n\n  return _immutable2.default.fromJS({\n    audience: audience,\n    connectionScopes: connectionScopes,\n    params: params,\n    autoParseHash: autoParseHash,\n    redirect: redirect,\n    redirectUrl: redirectUrl,\n    responseMode: responseMode,\n    responseType: responseType,\n    sso: sso,\n    state: state,\n    nonce: nonce\n  });\n}\n\nfunction withAuthOptions(m, opts) {\n  return _immutable2.default.fromJS(opts).merge(get(m, 'auth')).toJS();\n}\n\nfunction extractClientBaseUrlOption(opts, domain) {\n  if (opts.clientBaseUrl && typeof opts.clientBaseUrl === 'string') {\n    return opts.clientBaseUrl;\n  }\n\n  if (opts.configurationBaseUrl && typeof opts.configurationBaseUrl === 'string') {\n    return opts.configurationBaseUrl;\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  var domainUrl = 'https://' + domain;\n  var hostname = (0, _url_utils.getLocationFromUrl)(domainUrl).hostname;\n  var DOT_AUTH0_DOT_COM = '.auth0.com';\n  var AUTH0_US_CDN_URL = 'https://cdn.auth0.com';\n\n  if ((0, _string_utils.endsWith)(hostname, DOT_AUTH0_DOT_COM)) {\n    var parts = hostname.split('.');\n    return parts.length > 3 ? 'https://cdn.' + parts[parts.length - 3] + DOT_AUTH0_DOT_COM : AUTH0_US_CDN_URL;\n  } else {\n    return domainUrl;\n  }\n}\n\nfunction extractTenantBaseUrlOption(opts, domain) {\n  if (opts.configurationBaseUrl && typeof opts.configurationBaseUrl === 'string') {\n    if (opts.overrides && opts.overrides.__tenant) {\n      // When using a custom domain and a configuration URL hosted in auth0's cdn\n      return (0, _urlJoin2.default)(opts.configurationBaseUrl, 'tenants', 'v1', opts.overrides.__tenant + '.js');\n    }\n\n    return (0, _urlJoin2.default)(opts.configurationBaseUrl, 'info-v1.js');\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  var domainUrl = 'https://' + domain;\n  var hostname = (0, _url_utils.getLocationFromUrl)(domainUrl).hostname;\n  var DOT_AUTH0_DOT_COM = '.auth0.com';\n  var AUTH0_US_CDN_URL = 'https://cdn.auth0.com';\n  var parts = hostname.split('.');\n  var tenant_name = parts[0];\n  var domain;\n\n  if ((0, _string_utils.endsWith)(hostname, DOT_AUTH0_DOT_COM)) {\n    domain = parts.length > 3 ? 'https://cdn.' + parts[parts.length - 3] + DOT_AUTH0_DOT_COM : AUTH0_US_CDN_URL;\n    return (0, _urlJoin2.default)(domain, 'tenants', 'v1', tenant_name + '.js');\n  } else {\n    return (0, _urlJoin2.default)(domainUrl, 'info-v1.js');\n  }\n}\n\nfunction extractLanguageBaseUrlOption(opts, domain) {\n  if (opts.languageBaseUrl && typeof opts.languageBaseUrl === 'string') {\n    return opts.languageBaseUrl;\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  return 'https://cdn.auth0.com';\n}\n\nfunction render(m) {\n  return tset(m, 'render', true);\n}\n\nexports.reset = reset;\n\nfunction setLoggedIn(m, value) {\n  return tset(m, 'loggedIn', value);\n}\n\nfunction loggedIn(m) {\n  return tget(m, 'loggedIn', false);\n}\n\nfunction defaultADUsernameFromEmailPrefix(m) {\n  return get(m, 'defaultADUsernameFromEmailPrefix', true);\n}\n\nfunction setCaptcha(m, value, wasInvalid) {\n  m = captchaField.reset(m, wasInvalid);\n  return set(m, 'captcha', _immutable2.default.fromJS(value));\n}\n\nfunction captcha(m) {\n  //some tests send an string as model.\n  // https://github.com/auth0/lock/blob/82f56187698528699478bd429858cf91e387763c/src/__tests__/engine/classic/sign_up_pane.test.jsx#L28\n  if ((typeof m === 'undefined' ? 'undefined' : _typeof(m)) !== 'object') {\n    return;\n  }\n\n  return get(m, 'captcha');\n}\n\nfunction prefill(m) {\n  return get(m, 'prefill', {});\n}\n\nfunction warn(x, str) {\n  var shouldOutput = _immutable.Map.isMap(x) ? !ui.disableWarnings(x) : !x.disableWarnings;\n\n  if (shouldOutput && console && console.warn) {\n    console.warn(str);\n  }\n}\n\nfunction error(x, str) {\n  var shouldOutput = _immutable.Map.isMap(x) ? !ui.disableWarnings(x) : !x.disableWarnings;\n\n  if (shouldOutput && console && console.error) {\n    console.error(str);\n  }\n}\n\nfunction allowedConnections(m) {\n  return tget(m, 'allowedConnections') || get(m, 'allowedConnections');\n}\n\nfunction connections(m) {\n  for (var _len = arguments.length, strategies = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    strategies[_key - 2] = arguments[_key];\n  }\n\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  if (arguments.length === 1) {\n    return tget(m, 'connections', (0, _immutable.Map)()).filter(function (v, k) {\n      return k !== 'unknown';\n    }).valueSeq().flatten(true);\n  }\n\n  var xs = tget(m, ['connections', type], (0, _immutable.List)());\n  return strategies.length > 0 ? xs.filter(function (x) {\n    return ~strategies.indexOf(x.get('strategy'));\n  }) : xs;\n}\n\nfunction connection(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len2 = arguments.length, strategies = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    strategies[_key2 - 2] = arguments[_key2];\n  }\n\n  return connections.apply(undefined, [m, type].concat(strategies)).get(0);\n}\n\nfunction hasOneConnection(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var xs = connections(m);\n  return xs.count() === 1 && (!type || xs.getIn([0, 'type']) === type);\n}\n\nfunction hasOnlyConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var all = connections(m).count();\n\n  for (var _len3 = arguments.length, strategies = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n    strategies[_key3 - 2] = arguments[_key3];\n  }\n\n  var filtered = connections.apply(undefined, [m, type].concat(strategies)).count();\n  return all > 0 && all === filtered;\n}\n\nfunction hasSomeConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len4 = arguments.length, strategies = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n    strategies[_key4 - 2] = arguments[_key4];\n  }\n\n  return countConnections.apply(undefined, [m, type].concat(strategies)) > 0;\n}\n\nfunction countConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len5 = arguments.length, strategies = Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {\n    strategies[_key5 - 2] = arguments[_key5];\n  }\n\n  return connections.apply(undefined, [m, type].concat(strategies)).count();\n}\n\nfunction findConnection(m, name) {\n  return connections(m).find(function (m1) {\n    return m1.get('name') === name;\n  });\n}\n\nfunction hasConnection(m, name) {\n  return !!findConnection(m, name);\n}\n\nfunction filterConnections(m) {\n  var allowed = allowedConnections(m);\n  var order = allowed.count() === 0 ? function (_) {\n    return 0;\n  } : function (c) {\n    return allowed.indexOf(c.get('name'));\n  };\n  return tset(m, 'connections', (0, _index.clientConnections)(m).map(function (cs) {\n    return cs.filter(function (c) {\n      return order(c) >= 0;\n    }).sort(function (c1, c2) {\n      return order(c1) - order(c2);\n    });\n  }));\n}\n\nfunction useCustomPasswordlessConnection(m) {\n  return get(m, 'useCustomPasswordlessConnection');\n}\n\nfunction runHook(m, str) {\n  for (var _len6 = arguments.length, args = Array(_len6 > 2 ? _len6 - 2 : 0), _key6 = 2; _key6 < _len6; _key6++) {\n    args[_key6 - 2] = arguments[_key6];\n  }\n\n  return get(m, 'hookRunner').apply(undefined, [str, m].concat(args));\n}\n\nfunction emitEvent(m, str) {\n  for (var _len7 = arguments.length, args = Array(_len7 > 2 ? _len7 - 2 : 0), _key7 = 2; _key7 < _len7; _key7++) {\n    args[_key7 - 2] = arguments[_key7];\n  }\n\n  setTimeout(function () {\n    var emitEventFn = get(m, 'emitEventFn');\n    var hadListener = emitEventFn.apply(undefined, [str].concat(args)); // Handle uncaught custom error\n\n    if (str === 'unrecoverable_error' && !hadListener) {\n      throw new (Function.prototype.bind.apply(Error, [null].concat(args)))();\n    }\n  }, 0);\n}\n\nfunction handleEvent(m, str) {\n  var handleEventFn = get(m, 'handleEventFn');\n\n  for (var _len8 = arguments.length, args = Array(_len8 > 2 ? _len8 - 2 : 0), _key8 = 2; _key8 < _len8; _key8++) {\n    args[_key8 - 2] = arguments[_key8];\n  }\n\n  handleEventFn.apply(undefined, [str].concat(args));\n}\n\nfunction loginErrorMessage(m, error, type) {\n  // NOTE: previous version of lock checked for status codes and, at\n  // some point, if the status code was 401 it defaults to an\n  // \"invalid_user_password\" error (actually the\n  // \"wrongEmailPasswordErrorText\" dict entry) instead of checking\n  // explicitly. We should figure out if there was a reason for that.\n  if (error.status === 0) {\n    return i18n.html(m, ['error', 'login', 'lock.network']);\n  } // Custom rule or hook error (except blocked_user)\n\n\n  if (error.code === 'rule_error' || error.code === 'hook_error') {\n    return error.description || i18n.html(m, ['error', 'login', 'lock.fallback']);\n  }\n\n  var INVALID_MAP = {\n    code: 'lock.invalid_code',\n    email: 'lock.invalid_email_password',\n    username: 'lock.invalid_username_password'\n  };\n  var code = error.error || error.code;\n\n  if (code === 'invalid_user_password' && INVALID_MAP[type]) {\n    code = INVALID_MAP[type];\n  }\n\n  if (code === 'a0.mfa_registration_required') {\n    code = 'lock.mfa_registration_required';\n  }\n\n  if (code === 'a0.mfa_invalid_code') {\n    code = 'lock.mfa_invalid_code';\n  }\n\n  if (code === 'password_expired') {\n    code = 'password_change_required';\n  }\n\n  if (code === 'invalid_captcha') {\n    var currentCaptcha = get(m, 'captcha');\n\n    if (currentCaptcha && currentCaptcha.get('provider') === 'recaptcha_v2') {\n      code = 'invalid_recaptcha';\n    }\n  }\n\n  return i18n.html(m, ['error', 'login', code]) || i18n.html(m, ['error', 'login', 'lock.fallback']);\n} // TODO: rename to something less generic that is easier to grep\n\n\nfunction stop(m, error) {\n  if (error) {\n    setTimeout(function () {\n      return emitEvent(m, 'unrecoverable_error', error);\n    }, 17);\n  }\n\n  return set(m, 'stopped', true);\n}\n\nfunction hasStopped(m) {\n  return get(m, 'stopped');\n}\n\nfunction hashCleanup(m) {\n  return get(m, 'hashCleanup');\n}\n\nfunction emitHashParsedEvent(m, parsedHash) {\n  emitEvent(m, 'hash_parsed', parsedHash);\n}\n\nfunction emitAuthenticatedEvent(m, result) {\n  emitEvent(m, 'authenticated', result);\n}\n\nfunction emitAuthorizationErrorEvent(m, error) {\n  emitEvent(m, 'authorization_error', error);\n}\n\nfunction emitUnrecoverableErrorEvent(m, error) {\n  emitEvent(m, 'unrecoverable_error', error);\n}\n\nfunction showBadge(m) {\n  return (0, _index.hasFreeSubscription)(m) || false;\n}\n\nfunction overrideOptions(m, opts) {\n  if (!opts) opts = {};\n\n  if (opts.allowedConnections) {\n    m = tset(m, 'allowedConnections', _immutable2.default.fromJS(opts.allowedConnections));\n  }\n\n  if (opts.flashMessage) {\n    var type = opts.flashMessage.type;\n    var typeCapitalized = type.charAt(0).toUpperCase() + type.slice(1);\n    m = tset(m, 'global' + typeCapitalized, opts.flashMessage.text);\n  }\n\n  if (opts.auth && opts.auth.params) {\n    m = tset(m, 'authParams', _immutable2.default.fromJS(opts.auth.params));\n  }\n\n  if (opts.theme) {\n    if (opts.theme.primaryColor) {\n      m = tset(m, ['ui', 'primaryColor'], opts.theme.primaryColor);\n    }\n\n    if (opts.theme.logo) {\n      m = tset(m, ['ui', 'logo'], opts.theme.logo);\n    }\n  }\n\n  if (opts.language || opts.languageDictionary) {\n    if (opts.language) {\n      m = tset(m, ['ui', 'language'], opts.language);\n    }\n\n    if (opts.languageDictionary) {\n      m = tset(m, ['ui', 'dict'], opts.languageDictionary);\n    }\n\n    m = i18n.initI18n(m);\n  }\n\n  if (typeof opts.rememberLastLogin === 'boolean') {\n    m = tset(m, 'rememberLastLogin', opts.rememberLastLogin);\n  }\n\n  if (typeof opts.allowAutocomplete === 'boolean') {\n    m = tset(m, 'allowAutocomplete', opts.allowAutocomplete);\n  }\n\n  if (typeof opts.allowShowPassword === 'boolean') {\n    m = tset(m, 'allowShowPassword', opts.allowShowPassword);\n  }\n\n  if (typeof opts.allowPasswordAutocomplete === 'boolean') {\n    m = tset(m, 'allowPasswordAutocomplete', opts.allowPasswordAutocomplete);\n  }\n\n  return m;\n}","map":{"version":3,"sources":["D:/TT18-EC-Team1-FE/isomorphic/node_modules/auth0-lock/lib/core/index.js"],"names":["exports","__esModule","reset","auth","ui","validPublicHooks","undefined","_typeof","Symbol","iterator","obj","constructor","prototype","setup","id","clientID","domain","clientBaseUrl","tenantBaseUrl","useTenantInfo","connectionResolver","setResolvedConnection","resolvedConnection","languageBaseUrl","setSubmitting","submitting","setGlobalError","globalError","clearGlobalError","setGlobalSuccess","globalSuccess","clearGlobalSuccess","setGlobalInfo","globalInfo","clearGlobalInfo","rendering","stopRendering","setSupressSubmitOverlay","suppressSubmitOverlay","hooks","withAuthOptions","extractTenantBaseUrlOption","render","setLoggedIn","loggedIn","defaultADUsernameFromEmailPrefix","setCaptcha","captcha","prefill","warn","error","allowedConnections","connections","connection","hasOneConnection","hasOnlyConnections","hasSomeConnections","countConnections","findConnection","hasConnection","filterConnections","useCustomPasswordlessConnection","runHook","emitEvent","handleEvent","loginErrorMessage","stop","hasStopped","hashCleanup","emitHashParsedEvent","emitAuthenticatedEvent","emitAuthorizationErrorEvent","emitUnrecoverableErrorEvent","showBadge","overrideOptions","_urlJoin","require","_urlJoin2","_interopRequireDefault","_immutable","_immutable2","_media_utils","_string_utils","_url_utils","_i18n","i18n","_interopRequireWildcard","_trim","_trim2","_gravatar_provider","gp","_data_utils","_index","_captcha","captchaField","newObj","key","Object","hasOwnProperty","call","default","_dataFns","dataFns","get","init","remove","set","tget","tset","tremove","options","hookRunner","emitEventFn","handleEventFn","m","fromJS","extractClientBaseUrlOption","extractLanguageBaseUrlOption","extractAuthOptions","__useTenantInfo","extractUIOptions","extractHookOptions","initI18n","type","name","Error","value","arguments","length","str","b","closable","container","theme","labeledSubmitButton","hideMainScreenTitle","logo","primaryColor","authButtons","avatar","customAvatarProvider","url","displayName","avatarProvider","containerID","appendContainer","autoclose","autofocus","isSmallScreen","language","toLowerCase","dict","languageDictionary","disableWarnings","mobile","popupOptions","rememberLastLogin","allowAutocomplete","preferConnectionDisplayName","authButtonsTheme","allowShowPassword","allowPasswordAutocomplete","scrollGlobalMessagesIntoView","forEach","hookName","_dataFns2","getUI","setUI","_dataFns3","tgetUI","tsetUI","getUIAttribute","attribute","lock","_dataFns4","getAuthAttribute","connectionScopes","params","autoParseHash","redirect","redirectUrl","responseType","sso","_ref","audience","responseMode","state","nonce","redirectUri","console","getOriginFromUrl","window","location","href","pathname","scope","opts","merge","toJS","configurationBaseUrl","assetsUrl","domainUrl","hostname","getLocationFromUrl","DOT_AUTH0_DOT_COM","AUTH0_US_CDN_URL","endsWith","parts","split","overrides","__tenant","tenant_name","wasInvalid","x","shouldOutput","Map","isMap","_len","strategies","Array","_key","filter","v","k","valueSeq","flatten","xs","List","indexOf","_len2","_key2","apply","concat","count","getIn","all","_len3","_key3","filtered","_len4","_key4","_len5","_key5","find","m1","allowed","order","_","c","clientConnections","map","cs","sort","c1","c2","_len6","args","_key6","_len7","_key7","setTimeout","hadListener","Function","bind","_len8","_key8","status","html","code","description","INVALID_MAP","email","username","currentCaptcha","parsedHash","result","hasFreeSubscription","flashMessage","typeCapitalized","charAt","toUpperCase","slice","text"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.reset = exports.auth = exports.ui = exports.validPublicHooks = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.setup = setup;\nexports.id = id;\nexports.clientID = clientID;\nexports.domain = domain;\nexports.clientBaseUrl = clientBaseUrl;\nexports.tenantBaseUrl = tenantBaseUrl;\nexports.useTenantInfo = useTenantInfo;\nexports.connectionResolver = connectionResolver;\nexports.setResolvedConnection = setResolvedConnection;\nexports.resolvedConnection = resolvedConnection;\nexports.languageBaseUrl = languageBaseUrl;\nexports.setSubmitting = setSubmitting;\nexports.submitting = submitting;\nexports.setGlobalError = setGlobalError;\nexports.globalError = globalError;\nexports.clearGlobalError = clearGlobalError;\nexports.setGlobalSuccess = setGlobalSuccess;\nexports.globalSuccess = globalSuccess;\nexports.clearGlobalSuccess = clearGlobalSuccess;\nexports.setGlobalInfo = setGlobalInfo;\nexports.globalInfo = globalInfo;\nexports.clearGlobalInfo = clearGlobalInfo;\nexports.rendering = rendering;\nexports.stopRendering = stopRendering;\nexports.setSupressSubmitOverlay = setSupressSubmitOverlay;\nexports.suppressSubmitOverlay = suppressSubmitOverlay;\nexports.hooks = hooks;\nexports.withAuthOptions = withAuthOptions;\nexports.extractTenantBaseUrlOption = extractTenantBaseUrlOption;\nexports.render = render;\nexports.setLoggedIn = setLoggedIn;\nexports.loggedIn = loggedIn;\nexports.defaultADUsernameFromEmailPrefix = defaultADUsernameFromEmailPrefix;\nexports.setCaptcha = setCaptcha;\nexports.captcha = captcha;\nexports.prefill = prefill;\nexports.warn = warn;\nexports.error = error;\nexports.allowedConnections = allowedConnections;\nexports.connections = connections;\nexports.connection = connection;\nexports.hasOneConnection = hasOneConnection;\nexports.hasOnlyConnections = hasOnlyConnections;\nexports.hasSomeConnections = hasSomeConnections;\nexports.countConnections = countConnections;\nexports.findConnection = findConnection;\nexports.hasConnection = hasConnection;\nexports.filterConnections = filterConnections;\nexports.useCustomPasswordlessConnection = useCustomPasswordlessConnection;\nexports.runHook = runHook;\nexports.emitEvent = emitEvent;\nexports.handleEvent = handleEvent;\nexports.loginErrorMessage = loginErrorMessage;\nexports.stop = stop;\nexports.hasStopped = hasStopped;\nexports.hashCleanup = hashCleanup;\nexports.emitHashParsedEvent = emitHashParsedEvent;\nexports.emitAuthenticatedEvent = emitAuthenticatedEvent;\nexports.emitAuthorizationErrorEvent = emitAuthorizationErrorEvent;\nexports.emitUnrecoverableErrorEvent = emitUnrecoverableErrorEvent;\nexports.showBadge = showBadge;\nexports.overrideOptions = overrideOptions;\n\nvar _urlJoin = require('url-join');\n\nvar _urlJoin2 = _interopRequireDefault(_urlJoin);\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _media_utils = require('../utils/media_utils');\n\nvar _string_utils = require('../utils/string_utils');\n\nvar _url_utils = require('../utils/url_utils');\n\nvar _i18n = require('../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _gravatar_provider = require('../avatar/gravatar_provider');\n\nvar gp = _interopRequireWildcard(_gravatar_provider);\n\nvar _data_utils = require('../utils/data_utils');\n\nvar _index = require('./client/index');\n\nvar _captcha = require('../field/captcha');\n\nvar captchaField = _interopRequireWildcard(_captcha);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _dataFns = (0, _data_utils.dataFns)(['core']),\n    get = _dataFns.get,\n    init = _dataFns.init,\n    remove = _dataFns.remove,\n    reset = _dataFns.reset,\n    set = _dataFns.set,\n    tget = _dataFns.tget,\n    tset = _dataFns.tset,\n    tremove = _dataFns.tremove;\n\nvar validPublicHooks = exports.validPublicHooks = ['loggingIn', 'signingUp'];\n\nfunction setup(id, clientID, domain, options, hookRunner, emitEventFn, handleEventFn) {\n  var m = init(id, _immutable2.default.fromJS({\n    clientBaseUrl: extractClientBaseUrlOption(options, domain),\n    tenantBaseUrl: extractTenantBaseUrlOption(options, domain),\n    languageBaseUrl: extractLanguageBaseUrlOption(options, domain),\n    auth: extractAuthOptions(options),\n    clientID: clientID,\n    domain: domain,\n    emitEventFn: emitEventFn,\n    hookRunner: hookRunner,\n    useTenantInfo: options.__useTenantInfo || false,\n    hashCleanup: options.hashCleanup === false ? false : true,\n    allowedConnections: _immutable2.default.fromJS(options.allowedConnections || []),\n    useCustomPasswordlessConnection: options.useCustomPasswordlessConnection === true ? true : false,\n    ui: extractUIOptions(id, options),\n    defaultADUsernameFromEmailPrefix: options.defaultADUsernameFromEmailPrefix === false ? false : true,\n    prefill: options.prefill || {},\n    connectionResolver: options.connectionResolver,\n    handleEventFn: handleEventFn,\n    hooks: extractHookOptions(options)\n  }));\n\n  m = i18n.initI18n(m);\n\n  return m;\n}\n\nfunction id(m) {\n  return m.get('id');\n}\n\nfunction clientID(m) {\n  return get(m, 'clientID');\n}\n\nfunction domain(m) {\n  return get(m, 'domain');\n}\n\nfunction clientBaseUrl(m) {\n  return get(m, 'clientBaseUrl');\n}\n\nfunction tenantBaseUrl(m) {\n  return get(m, 'tenantBaseUrl');\n}\n\nfunction useTenantInfo(m) {\n  return get(m, 'useTenantInfo');\n}\n\nfunction connectionResolver(m) {\n  return get(m, 'connectionResolver');\n}\n\nfunction setResolvedConnection(m, resolvedConnection) {\n  if (!resolvedConnection) {\n    return set(m, 'resolvedConnection', undefined);\n  }\n  if (!resolvedConnection.type || !resolvedConnection.name) {\n    throw new Error('Invalid connection object. The resolved connection must look like: `{ type: \"database\", name: \"connection name\" }`.');\n  }\n  if (resolvedConnection.type !== 'database') {\n    throw new Error('Invalid connection type. Only database connections can be resolved with a custom resolver.');\n  }\n  return set(m, 'resolvedConnection', _immutable2.default.fromJS(resolvedConnection));\n}\n\nfunction resolvedConnection(m) {\n  var resolvedConnection = get(m, 'resolvedConnection');\n  if (!resolvedConnection) {\n    return undefined;\n  }\n  return findConnection(m, resolvedConnection.get('name'));\n}\n\nfunction languageBaseUrl(m) {\n  return get(m, 'languageBaseUrl');\n}\n\nfunction setSubmitting(m, value) {\n  var error = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n  m = tset(m, 'submitting', value);\n  m = clearGlobalSuccess(m);\n  m = error && !value ? setGlobalError(m, error) : clearGlobalError(m);\n  return m;\n}\n\nfunction submitting(m) {\n  return tget(m, 'submitting', false);\n}\n\nfunction setGlobalError(m, str) {\n  return tset(m, 'globalError', str);\n}\n\nfunction globalError(m) {\n  return tget(m, 'globalError', '');\n}\n\nfunction clearGlobalError(m) {\n  return tremove(m, 'globalError');\n}\n\nfunction setGlobalSuccess(m, str) {\n  return tset(m, 'globalSuccess', str);\n}\n\nfunction globalSuccess(m) {\n  return tget(m, 'globalSuccess', '');\n}\n\nfunction clearGlobalSuccess(m) {\n  return tremove(m, 'globalSuccess');\n}\n\nfunction setGlobalInfo(m, str) {\n  return tset(m, 'globalInfo', str);\n}\n\nfunction globalInfo(m) {\n  return tget(m, 'globalInfo', '');\n}\n\nfunction clearGlobalInfo(m) {\n  return tremove(m, 'globalInfo');\n}\n\nfunction rendering(m) {\n  return tget(m, 'render', false);\n}\n\nfunction stopRendering(m) {\n  return tremove(m, 'render');\n}\n\nfunction setSupressSubmitOverlay(m, b) {\n  return set(m, 'suppressSubmitOverlay', b);\n}\n\nfunction suppressSubmitOverlay(m) {\n  return get(m, 'suppressSubmitOverlay');\n}\n\nfunction hooks(m) {\n  return get(m, 'hooks');\n}\n\nfunction extractUIOptions(id, options) {\n  var closable = options.container ? false : undefined === options.closable ? true : !!options.closable;\n  var theme = options.theme || {};\n  var labeledSubmitButton = theme.labeledSubmitButton,\n      hideMainScreenTitle = theme.hideMainScreenTitle,\n      logo = theme.logo,\n      primaryColor = theme.primaryColor,\n      authButtons = theme.authButtons;\n\n\n  var avatar = options.avatar !== null;\n  var customAvatarProvider = options.avatar && typeof options.avatar.url === 'function' && typeof options.avatar.displayName === 'function' && options.avatar;\n  var avatarProvider = customAvatarProvider || gp;\n\n  return new _immutable2.default.fromJS({\n    containerID: options.container || 'auth0-lock-container-' + id,\n    appendContainer: !options.container,\n    autoclose: undefined === options.autoclose ? false : closable && options.autoclose,\n    autofocus: undefined === options.autofocus ? !(options.container || (0, _media_utils.isSmallScreen)()) : !!options.autofocus,\n    avatar: avatar,\n    avatarProvider: avatarProvider,\n    logo: typeof logo === 'string' ? logo : undefined,\n    closable: closable,\n    hideMainScreenTitle: !!hideMainScreenTitle,\n    labeledSubmitButton: undefined === labeledSubmitButton ? true : !!labeledSubmitButton,\n    language: undefined === options.language ? 'en' : (0, _trim2.default)(options.language || '').toLowerCase(),\n    dict: _typeof(options.languageDictionary) === 'object' ? options.languageDictionary : {},\n    disableWarnings: options.disableWarnings === undefined ? false : !!options.disableWarnings,\n    mobile: undefined === options.mobile ? false : !!options.mobile,\n    popupOptions: undefined === options.popupOptions ? {} : options.popupOptions,\n    primaryColor: typeof primaryColor === 'string' ? primaryColor : undefined,\n    rememberLastLogin: undefined === options.rememberLastLogin ? true : !!options.rememberLastLogin,\n    allowAutocomplete: !!options.allowAutocomplete,\n    preferConnectionDisplayName: !!options.preferConnectionDisplayName,\n    authButtonsTheme: (typeof authButtons === 'undefined' ? 'undefined' : _typeof(authButtons)) === 'object' ? authButtons : {},\n    allowShowPassword: !!options.allowShowPassword,\n    allowPasswordAutocomplete: !!options.allowPasswordAutocomplete,\n    scrollGlobalMessagesIntoView: undefined === options.scrollGlobalMessagesIntoView ? true : !!options.scrollGlobalMessagesIntoView\n  });\n}\n\nfunction extractHookOptions(options) {\n  var hooks = {};\n\n  validPublicHooks.forEach(function (hookName) {\n    if (options.hooks && typeof options.hooks[hookName] === 'function') {\n      hooks[hookName] = options.hooks[hookName];\n    }\n  });\n\n  return new _immutable2.default.fromJS(hooks);\n}\n\nvar _dataFns2 = (0, _data_utils.dataFns)(['core', 'ui']),\n    getUI = _dataFns2.get,\n    setUI = _dataFns2.set;\n\nvar _dataFns3 = (0, _data_utils.dataFns)(['core', 'transient', 'ui']),\n    tgetUI = _dataFns3.get,\n    tsetUI = _dataFns3.set;\n\nvar getUIAttribute = function getUIAttribute(m, attribute) {\n  return tgetUI(m, attribute) || getUI(m, attribute);\n};\n\nvar ui = exports.ui = {\n  containerID: function containerID(lock) {\n    return getUIAttribute(lock, 'containerID');\n  },\n  appendContainer: function appendContainer(lock) {\n    return getUIAttribute(lock, 'appendContainer');\n  },\n  autoclose: function autoclose(lock) {\n    return getUIAttribute(lock, 'autoclose');\n  },\n  autofocus: function autofocus(lock) {\n    return getUIAttribute(lock, 'autofocus');\n  },\n  avatar: function avatar(lock) {\n    return getUIAttribute(lock, 'avatar');\n  },\n  avatarProvider: function avatarProvider(lock) {\n    return getUIAttribute(lock, 'avatarProvider');\n  },\n  closable: function closable(lock) {\n    return getUIAttribute(lock, 'closable');\n  },\n  dict: function dict(lock) {\n    return getUIAttribute(lock, 'dict');\n  },\n  disableWarnings: function disableWarnings(lock) {\n    return getUIAttribute(lock, 'disableWarnings');\n  },\n  labeledSubmitButton: function labeledSubmitButton(lock) {\n    return getUIAttribute(lock, 'labeledSubmitButton');\n  },\n  hideMainScreenTitle: function hideMainScreenTitle(lock) {\n    return getUIAttribute(lock, 'hideMainScreenTitle');\n  },\n  language: function language(lock) {\n    return getUIAttribute(lock, 'language');\n  },\n  logo: function logo(lock) {\n    return getUIAttribute(lock, 'logo');\n  },\n  mobile: function mobile(lock) {\n    return getUIAttribute(lock, 'mobile');\n  },\n  popupOptions: function popupOptions(lock) {\n    return getUIAttribute(lock, 'popupOptions');\n  },\n  primaryColor: function primaryColor(lock) {\n    return getUIAttribute(lock, 'primaryColor');\n  },\n  authButtonsTheme: function authButtonsTheme(lock) {\n    return getUIAttribute(lock, 'authButtonsTheme');\n  },\n  preferConnectionDisplayName: function preferConnectionDisplayName(lock) {\n    return getUIAttribute(lock, 'preferConnectionDisplayName');\n  },\n  rememberLastLogin: function rememberLastLogin(m) {\n    return tget(m, 'rememberLastLogin', getUIAttribute(m, 'rememberLastLogin'));\n  },\n  allowAutocomplete: function allowAutocomplete(m) {\n    return tget(m, 'allowAutocomplete', getUIAttribute(m, 'allowAutocomplete'));\n  },\n  scrollGlobalMessagesIntoView: function scrollGlobalMessagesIntoView(lock) {\n    return getUIAttribute(lock, 'scrollGlobalMessagesIntoView');\n  },\n  allowShowPassword: function allowShowPassword(m) {\n    return tget(m, 'allowShowPassword', getUIAttribute(m, 'allowShowPassword'));\n  },\n  allowPasswordAutocomplete: function allowPasswordAutocomplete(m) {\n    return tget(m, 'allowPasswordAutocomplete', getUIAttribute(m, 'allowPasswordAutocomplete'));\n  }\n};\n\nvar _dataFns4 = (0, _data_utils.dataFns)(['core', 'auth']),\n    getAuthAttribute = _dataFns4.get;\n\nvar auth = exports.auth = {\n  connectionScopes: function connectionScopes(m) {\n    return getAuthAttribute(m, 'connectionScopes');\n  },\n  params: function params(m) {\n    return tget(m, 'authParams') || getAuthAttribute(m, 'params');\n  },\n  autoParseHash: function autoParseHash(lock) {\n    return getAuthAttribute(lock, 'autoParseHash');\n  },\n  redirect: function redirect(lock) {\n    return getAuthAttribute(lock, 'redirect');\n  },\n  redirectUrl: function redirectUrl(lock) {\n    return getAuthAttribute(lock, 'redirectUrl');\n  },\n  responseType: function responseType(lock) {\n    return getAuthAttribute(lock, 'responseType');\n  },\n  sso: function sso(lock) {\n    return getAuthAttribute(lock, 'sso');\n  }\n};\n\nfunction extractAuthOptions(options) {\n  var _ref = options.auth || {},\n      audience = _ref.audience,\n      connectionScopes = _ref.connectionScopes,\n      params = _ref.params,\n      autoParseHash = _ref.autoParseHash,\n      redirect = _ref.redirect,\n      redirectUrl = _ref.redirectUrl,\n      responseMode = _ref.responseMode,\n      responseType = _ref.responseType,\n      sso = _ref.sso,\n      state = _ref.state,\n      nonce = _ref.nonce;\n\n  if (options.auth && options.auth.redirectUri) {\n    console.warn(\"You're sending an `auth` option named `redirectUri`. This option will be ignored. Use `redirectUrl` instead.\");\n  }\n\n  audience = typeof audience === 'string' ? audience : undefined;\n  connectionScopes = (typeof connectionScopes === 'undefined' ? 'undefined' : _typeof(connectionScopes)) === 'object' ? connectionScopes : {};\n  params = (typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object' ? params : {};\n  // by default is null because we need to know if it was set when we curate the responseType\n  redirectUrl = typeof redirectUrl === 'string' && redirectUrl ? redirectUrl : null;\n  autoParseHash = typeof autoParseHash === 'boolean' ? autoParseHash : true;\n  redirect = typeof redirect === 'boolean' ? redirect : true;\n  responseMode = typeof responseMode === 'string' ? responseMode : undefined;\n  state = typeof state === 'string' ? state : undefined;\n  nonce = typeof nonce === 'string' ? nonce : undefined;\n  // if responseType was not set and there is a redirectUrl, it defaults to code. Otherwise token.\n  responseType = typeof responseType === 'string' ? responseType : redirectUrl ? 'code' : 'token';\n  // now we set the default because we already did the validation\n  redirectUrl = redirectUrl || '' + (0, _url_utils.getOriginFromUrl)(window.location.href) + window.location.pathname;\n\n  sso = typeof sso === 'boolean' ? sso : true;\n\n  if (!params.scope) {\n    params.scope = 'openid profile email';\n  }\n\n  return _immutable2.default.fromJS({\n    audience: audience,\n    connectionScopes: connectionScopes,\n    params: params,\n    autoParseHash: autoParseHash,\n    redirect: redirect,\n    redirectUrl: redirectUrl,\n    responseMode: responseMode,\n    responseType: responseType,\n    sso: sso,\n    state: state,\n    nonce: nonce\n  });\n}\n\nfunction withAuthOptions(m, opts) {\n  return _immutable2.default.fromJS(opts).merge(get(m, 'auth')).toJS();\n}\n\nfunction extractClientBaseUrlOption(opts, domain) {\n  if (opts.clientBaseUrl && typeof opts.clientBaseUrl === 'string') {\n    return opts.clientBaseUrl;\n  }\n\n  if (opts.configurationBaseUrl && typeof opts.configurationBaseUrl === 'string') {\n    return opts.configurationBaseUrl;\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  var domainUrl = 'https://' + domain;\n  var hostname = (0, _url_utils.getLocationFromUrl)(domainUrl).hostname;\n  var DOT_AUTH0_DOT_COM = '.auth0.com';\n  var AUTH0_US_CDN_URL = 'https://cdn.auth0.com';\n  if ((0, _string_utils.endsWith)(hostname, DOT_AUTH0_DOT_COM)) {\n    var parts = hostname.split('.');\n    return parts.length > 3 ? 'https://cdn.' + parts[parts.length - 3] + DOT_AUTH0_DOT_COM : AUTH0_US_CDN_URL;\n  } else {\n    return domainUrl;\n  }\n}\n\nfunction extractTenantBaseUrlOption(opts, domain) {\n  if (opts.configurationBaseUrl && typeof opts.configurationBaseUrl === 'string') {\n    if (opts.overrides && opts.overrides.__tenant) {\n      // When using a custom domain and a configuration URL hosted in auth0's cdn\n      return (0, _urlJoin2.default)(opts.configurationBaseUrl, 'tenants', 'v1', opts.overrides.__tenant + '.js');\n    }\n    return (0, _urlJoin2.default)(opts.configurationBaseUrl, 'info-v1.js');\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  var domainUrl = 'https://' + domain;\n  var hostname = (0, _url_utils.getLocationFromUrl)(domainUrl).hostname;\n  var DOT_AUTH0_DOT_COM = '.auth0.com';\n  var AUTH0_US_CDN_URL = 'https://cdn.auth0.com';\n\n  var parts = hostname.split('.');\n  var tenant_name = parts[0];\n  var domain;\n\n  if ((0, _string_utils.endsWith)(hostname, DOT_AUTH0_DOT_COM)) {\n    domain = parts.length > 3 ? 'https://cdn.' + parts[parts.length - 3] + DOT_AUTH0_DOT_COM : AUTH0_US_CDN_URL;\n\n    return (0, _urlJoin2.default)(domain, 'tenants', 'v1', tenant_name + '.js');\n  } else {\n    return (0, _urlJoin2.default)(domainUrl, 'info-v1.js');\n  }\n}\n\nfunction extractLanguageBaseUrlOption(opts, domain) {\n  if (opts.languageBaseUrl && typeof opts.languageBaseUrl === 'string') {\n    return opts.languageBaseUrl;\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  return 'https://cdn.auth0.com';\n}\n\nfunction render(m) {\n  return tset(m, 'render', true);\n}\n\nexports.reset = reset;\nfunction setLoggedIn(m, value) {\n  return tset(m, 'loggedIn', value);\n}\n\nfunction loggedIn(m) {\n  return tget(m, 'loggedIn', false);\n}\n\nfunction defaultADUsernameFromEmailPrefix(m) {\n  return get(m, 'defaultADUsernameFromEmailPrefix', true);\n}\n\nfunction setCaptcha(m, value, wasInvalid) {\n  m = captchaField.reset(m, wasInvalid);\n  return set(m, 'captcha', _immutable2.default.fromJS(value));\n}\n\nfunction captcha(m) {\n  //some tests send an string as model.\n  // https://github.com/auth0/lock/blob/82f56187698528699478bd429858cf91e387763c/src/__tests__/engine/classic/sign_up_pane.test.jsx#L28\n  if ((typeof m === 'undefined' ? 'undefined' : _typeof(m)) !== 'object') {\n    return;\n  }\n  return get(m, 'captcha');\n}\n\nfunction prefill(m) {\n  return get(m, 'prefill', {});\n}\n\nfunction warn(x, str) {\n  var shouldOutput = _immutable.Map.isMap(x) ? !ui.disableWarnings(x) : !x.disableWarnings;\n\n  if (shouldOutput && console && console.warn) {\n    console.warn(str);\n  }\n}\n\nfunction error(x, str) {\n  var shouldOutput = _immutable.Map.isMap(x) ? !ui.disableWarnings(x) : !x.disableWarnings;\n\n  if (shouldOutput && console && console.error) {\n    console.error(str);\n  }\n}\n\nfunction allowedConnections(m) {\n  return tget(m, 'allowedConnections') || get(m, 'allowedConnections');\n}\n\nfunction connections(m) {\n  for (var _len = arguments.length, strategies = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    strategies[_key - 2] = arguments[_key];\n  }\n\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  if (arguments.length === 1) {\n    return tget(m, 'connections', (0, _immutable.Map)()).filter(function (v, k) {\n      return k !== 'unknown';\n    }).valueSeq().flatten(true);\n  }\n\n  var xs = tget(m, ['connections', type], (0, _immutable.List)());\n  return strategies.length > 0 ? xs.filter(function (x) {\n    return ~strategies.indexOf(x.get('strategy'));\n  }) : xs;\n}\n\nfunction connection(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len2 = arguments.length, strategies = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    strategies[_key2 - 2] = arguments[_key2];\n  }\n\n  return connections.apply(undefined, [m, type].concat(strategies)).get(0);\n}\n\nfunction hasOneConnection(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  var xs = connections(m);\n  return xs.count() === 1 && (!type || xs.getIn([0, 'type']) === type);\n}\n\nfunction hasOnlyConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  var all = connections(m).count();\n\n  for (var _len3 = arguments.length, strategies = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n    strategies[_key3 - 2] = arguments[_key3];\n  }\n\n  var filtered = connections.apply(undefined, [m, type].concat(strategies)).count();\n  return all > 0 && all === filtered;\n}\n\nfunction hasSomeConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len4 = arguments.length, strategies = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n    strategies[_key4 - 2] = arguments[_key4];\n  }\n\n  return countConnections.apply(undefined, [m, type].concat(strategies)) > 0;\n}\n\nfunction countConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len5 = arguments.length, strategies = Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {\n    strategies[_key5 - 2] = arguments[_key5];\n  }\n\n  return connections.apply(undefined, [m, type].concat(strategies)).count();\n}\n\nfunction findConnection(m, name) {\n  return connections(m).find(function (m1) {\n    return m1.get('name') === name;\n  });\n}\n\nfunction hasConnection(m, name) {\n  return !!findConnection(m, name);\n}\n\nfunction filterConnections(m) {\n  var allowed = allowedConnections(m);\n\n  var order = allowed.count() === 0 ? function (_) {\n    return 0;\n  } : function (c) {\n    return allowed.indexOf(c.get('name'));\n  };\n\n  return tset(m, 'connections', (0, _index.clientConnections)(m).map(function (cs) {\n    return cs.filter(function (c) {\n      return order(c) >= 0;\n    }).sort(function (c1, c2) {\n      return order(c1) - order(c2);\n    });\n  }));\n}\n\nfunction useCustomPasswordlessConnection(m) {\n  return get(m, 'useCustomPasswordlessConnection');\n}\n\nfunction runHook(m, str) {\n  for (var _len6 = arguments.length, args = Array(_len6 > 2 ? _len6 - 2 : 0), _key6 = 2; _key6 < _len6; _key6++) {\n    args[_key6 - 2] = arguments[_key6];\n  }\n\n  return get(m, 'hookRunner').apply(undefined, [str, m].concat(args));\n}\n\nfunction emitEvent(m, str) {\n  for (var _len7 = arguments.length, args = Array(_len7 > 2 ? _len7 - 2 : 0), _key7 = 2; _key7 < _len7; _key7++) {\n    args[_key7 - 2] = arguments[_key7];\n  }\n\n  setTimeout(function () {\n    var emitEventFn = get(m, 'emitEventFn');\n    var hadListener = emitEventFn.apply(undefined, [str].concat(args));\n    // Handle uncaught custom error\n    if (str === 'unrecoverable_error' && !hadListener) {\n      throw new (Function.prototype.bind.apply(Error, [null].concat(args)))();\n    }\n  }, 0);\n}\n\nfunction handleEvent(m, str) {\n  var handleEventFn = get(m, 'handleEventFn');\n\n  for (var _len8 = arguments.length, args = Array(_len8 > 2 ? _len8 - 2 : 0), _key8 = 2; _key8 < _len8; _key8++) {\n    args[_key8 - 2] = arguments[_key8];\n  }\n\n  handleEventFn.apply(undefined, [str].concat(args));\n}\n\nfunction loginErrorMessage(m, error, type) {\n  // NOTE: previous version of lock checked for status codes and, at\n  // some point, if the status code was 401 it defaults to an\n  // \"invalid_user_password\" error (actually the\n  // \"wrongEmailPasswordErrorText\" dict entry) instead of checking\n  // explicitly. We should figure out if there was a reason for that.\n\n  if (error.status === 0) {\n    return i18n.html(m, ['error', 'login', 'lock.network']);\n  }\n\n  // Custom rule or hook error (except blocked_user)\n  if (error.code === 'rule_error' || error.code === 'hook_error') {\n    return error.description || i18n.html(m, ['error', 'login', 'lock.fallback']);\n  }\n\n  var INVALID_MAP = {\n    code: 'lock.invalid_code',\n    email: 'lock.invalid_email_password',\n    username: 'lock.invalid_username_password'\n  };\n\n  var code = error.error || error.code;\n  if (code === 'invalid_user_password' && INVALID_MAP[type]) {\n    code = INVALID_MAP[type];\n  }\n\n  if (code === 'a0.mfa_registration_required') {\n    code = 'lock.mfa_registration_required';\n  }\n\n  if (code === 'a0.mfa_invalid_code') {\n    code = 'lock.mfa_invalid_code';\n  }\n  if (code === 'password_expired') {\n    code = 'password_change_required';\n  }\n\n  if (code === 'invalid_captcha') {\n    var currentCaptcha = get(m, 'captcha');\n    if (currentCaptcha && currentCaptcha.get('provider') === 'recaptcha_v2') {\n      code = 'invalid_recaptcha';\n    }\n  }\n\n  return i18n.html(m, ['error', 'login', code]) || i18n.html(m, ['error', 'login', 'lock.fallback']);\n}\n\n// TODO: rename to something less generic that is easier to grep\nfunction stop(m, error) {\n  if (error) {\n    setTimeout(function () {\n      return emitEvent(m, 'unrecoverable_error', error);\n    }, 17);\n  }\n\n  return set(m, 'stopped', true);\n}\n\nfunction hasStopped(m) {\n  return get(m, 'stopped');\n}\n\nfunction hashCleanup(m) {\n  return get(m, 'hashCleanup');\n}\n\nfunction emitHashParsedEvent(m, parsedHash) {\n  emitEvent(m, 'hash_parsed', parsedHash);\n}\n\nfunction emitAuthenticatedEvent(m, result) {\n  emitEvent(m, 'authenticated', result);\n}\n\nfunction emitAuthorizationErrorEvent(m, error) {\n  emitEvent(m, 'authorization_error', error);\n}\n\nfunction emitUnrecoverableErrorEvent(m, error) {\n  emitEvent(m, 'unrecoverable_error', error);\n}\n\nfunction showBadge(m) {\n  return (0, _index.hasFreeSubscription)(m) || false;\n}\n\nfunction overrideOptions(m, opts) {\n  if (!opts) opts = {};\n\n  if (opts.allowedConnections) {\n    m = tset(m, 'allowedConnections', _immutable2.default.fromJS(opts.allowedConnections));\n  }\n\n  if (opts.flashMessage) {\n    var type = opts.flashMessage.type;\n\n    var typeCapitalized = type.charAt(0).toUpperCase() + type.slice(1);\n    m = tset(m, 'global' + typeCapitalized, opts.flashMessage.text);\n  }\n\n  if (opts.auth && opts.auth.params) {\n    m = tset(m, 'authParams', _immutable2.default.fromJS(opts.auth.params));\n  }\n\n  if (opts.theme) {\n    if (opts.theme.primaryColor) {\n      m = tset(m, ['ui', 'primaryColor'], opts.theme.primaryColor);\n    }\n\n    if (opts.theme.logo) {\n      m = tset(m, ['ui', 'logo'], opts.theme.logo);\n    }\n  }\n\n  if (opts.language || opts.languageDictionary) {\n    if (opts.language) {\n      m = tset(m, ['ui', 'language'], opts.language);\n    }\n\n    if (opts.languageDictionary) {\n      m = tset(m, ['ui', 'dict'], opts.languageDictionary);\n    }\n\n    m = i18n.initI18n(m);\n  }\n\n  if (typeof opts.rememberLastLogin === 'boolean') {\n    m = tset(m, 'rememberLastLogin', opts.rememberLastLogin);\n  }\n  if (typeof opts.allowAutocomplete === 'boolean') {\n    m = tset(m, 'allowAutocomplete', opts.allowAutocomplete);\n  }\n  if (typeof opts.allowShowPassword === 'boolean') {\n    m = tset(m, 'allowShowPassword', opts.allowShowPassword);\n  }\n  if (typeof opts.allowPasswordAutocomplete === 'boolean') {\n    m = tset(m, 'allowPasswordAutocomplete', opts.allowPasswordAutocomplete);\n  }\n\n  return m;\n}\n"]},"metadata":{},"sourceType":"script"}